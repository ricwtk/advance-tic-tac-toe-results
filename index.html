<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:200,400,700"> 
    <link rel="stylesheet" href="./main.css">
  </head>
  <body>
    <div id="app">
      <div class="screen" id="left-panel">
        <!-- <div id="current-game">
          <div class="screen-head">Current game</div>
          <div id="current-game-info" v-if="players.length > 0">
            <div :class="['team-block', 'mdi', 'mdi-' + players[play[0]].icon]"></div>&nbsp;vs&nbsp;<div :class="['team-block', 'mdi', 'mdi-' + players[play[1]].icon]"></div>
          </div>
        </div> -->
        <div class="screen" id="tournament-view">
          <div class="screen-head">Tournament</div>
          <div class="text-button" title="open scoreboard" @click="showing_scoreboard = true">
            <div class="mdi mdi-view-dashboard-variant"></div><div>Scoreboard</div>
          </div>
          <div v-if="main_player !== ''" id="main-team-wrapper" :title="players[main_player].name">
            <div class="team" id="main-team"><div>{{ players[main_player].name }}</div><div :class="['mdi', 'mdi-' + players[main_player].icon]"></div></div>
          </div>
          <div class="screen" id="opponents" v-if="main_player !== ''">
            <div v-for="k,i in player_keys_in_order" class="opponent" v-if="k != main_player">
              <div :class="['team-block', 'mdi', 'mdi-'+players[k].icon]" :title="players[k].name"></div>
              <div 
                :class="['result-block', 'mdi'].concat(scores[k][main_player] == 0 ? ['win', 'mdi-thumb-up-outline'] : scores[k][main_player] == 1 ? ['lose', 'mdi-thumb-down-outline'] : scores[k][main_player] == 2 ? ['tie', 'mdi-thumbs-up-down'] : ['yet', 'mdi-help'] )"
                :title="scores[k][main_player] == 0 ? players[main_player].name + ' win' : scores[k][main_player] == 1 ? players[main_player].name + ' lose' : scores[k][main_player] == 2 ? 'tie' : '?'"></div>
              <div
                :class="['result-block', 'mdi'].concat(scores[main_player][k] == 1 ? ['win', 'mdi-thumb-up-outline'] : scores[main_player][k] == 0 ? ['lose', 'mdi-thumb-down-outline'] : scores[main_player][k] == 2 ? ['tie', 'mdi-thumbs-up-down'] : ['yet', 'mdi-help'] )"
                :title="scores[main_player][k] == 1 ? players[main_player].name + ' win' : scores[main_player][k] == 0 ? players[main_player].name + ' lose' : scores[main_player][k] == 2 ? 'tie' : '?'"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="overlay" id="scoreboard-overlay" v-show="showing_scoreboard">
        <div class="overlay-box">
          <div class="overlay-title">
            Scoreboard
          </div>
          <div class="overlay-content">
            <table id="scoreboard" v-if="player_number > 0">
              <tr>
                <td></td>
                <td></td>
                <td :colspan="player_number" class="mdi mdi-numeric-2-box-outline"></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td v-for="k in player_keys_in_order" class="score-team-label"><div :class="['mdi', 'mdi-'+players[k].icon]"></div></td>
              </tr>
              <tr v-for="k,i in player_keys_in_order">
                <td v-if="i == 0" :rowspan="player_number" class="mdi mdi-numeric-1-box-outline"></td>
                <td class="score-team-label"><div :class="['mdi', 'mdi-'+players[k].icon]"></div></td>
                <td v-for="l,j in player_keys_in_order" :class="scores[l] ? scores[l][k] == 2 ? 'tie' : scores[l][k] == 1 ? 'win' : scores[l][k] == 0 ? 'lose' : 'yet' : 'yet'"
                  @mouseover="l == k ? setScoreHover('', '') : setScoreHover(l,k)"
                  @mouseleave="setScoreHover('','')"
                ></td>
              </tr>
            </table>
          </div>
          <div id="score-text">
            <template v-if="score_hover_text.p1 !== ''">
              <div :class="['mdi', 'mdi-'+players[score_hover_text.p1].icon]"></div>&nbsp;{{ players[score_hover_text.p1].name }}
              &nbsp;vs&nbsp;
              <div :class="['mdi', 'mdi-'+players[score_hover_text.p2].icon]"></div>&nbsp;{{ players[score_hover_text.p2].name }}
              &nbsp;|&nbsp;
              <template v-if="[0,1].includes(scores[score_hover_text.p1][score_hover_text.p2])">
                <div :class="['mdi', 'mdi-'+players[scores[score_hover_text.p1][score_hover_text.p2] == 0 ? score_hover_text.p2 : score_hover_text.p1].icon]"></div>
                &nbsp;{{ players[scores[score_hover_text.p1][score_hover_text.p2] == 0 ? score_hover_text.p2 : score_hover_text.p1].name }}&nbsp;wins
              </template>
              <template v-else-if="scores[score_hover_text.p1][score_hover_text.p2] == 2">tie</template>
              <template v-else-if="scores[score_hover_text.p1][score_hover_text.p2] == -1">TBD</template>
            </template>
            <div>&nbsp;</div>
          </div>
          <div class="overlay-controls">
            <div class="control-block mdi mdi-close" @click="showing_scoreboard = false"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="./main.js"></script>
  </body>
</html>